<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Java Comprehensive Quiz (50 Questions)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f6ff; margin: 0; padding: 20px; }
    h1 { text-align: center; color: #003366; }
    .question { background: #fff; padding: 12px 16px; margin: 12px 0; border-radius: 6px; box-shadow: 0 1px 4px rgba(0,0,0,0.1); }
    .question p { font-weight: 600; color: #003366; }
    .controls { text-align: center; margin: 20px; }
    button { background: #0059b3; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    button:hover { background: #003d80; }
    #result { text-align: center; font-size: 1.3rem; color: #333; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Java Comprehensive Quiz (50 Questions)</h1>

  <form id="quizForm">
    <div id="quizContainer"></div>
    <div class="controls">
      <button type="submit">Submit Quiz</button>
    </div>
  </form>

  <div id="result"></div>

  <script>
    const questions = [
      { q: "1. Java source code is compiled into which intermediate form?", a:["Machine code","Bytecode","Script","Native binary"] },
      { q: "2. Who originally developed Java?", a:["Microsoft","Sun Microsystems","Apple","IBM"] },
      { q: "3. What does JVM stand for?", a:["Java Variable Machine","Java Virtual Machine","Java Verified Module","Java Version Manager"] },
      { q: "4. Which file extension is used for Java source files?", a:[".class",".java",".jar",".py"] },
      { q: "5. 'Write Once, Run Anywhere' refers to which Java feature?", a:["Garbage Collection","Bytecode + JVM","JIT compiler only","Native compilation"] },
      { q: "6. Which Java buzzword refers to safety from pointer arithmetic?", a:["Simple","Robust","Secure","Multithreaded"] },
      { q: "7. Which is NOT a typical Java buzzword?", a:["Portable","Compiled-only","Robust","Secure"] },
      { q: "8. JIT stands for?", a:["Just-In-Time","Java-Interpreter-Tool","Java-Index-Table","Joined-In-Threads"] },
      { q: "9. Which of these is a primitive in Java?", a:["String","ArrayList","int","Scanner"] },
      { q: "10. Default value of boolean member variable is?", a:["true","false","null","0"] },
      { q: "11. Which type stores fractional numbers with double precision?", a:["float","double","int","long"] },
      { q: "12. The 'char' in Java stores what?", a:["16-bit Unicode character","8-bit ASCII only","String","Integer"] },
      { q: "13. Which operator is used for equality check?", a:["=","==","equals","==="] },
      { q: "14. What does '++' do?", a:["Addition","Increment by 1","Concatenate","Decrement"] },
      { q: "15. Which is the logical AND operator (short-circuit)?", a:["&","and","&&","||"] },
      { q: "16. What does the ternary operator ? : return?", a:["A value based on condition","Boolean only","Throws Exception","Loop control"] },
      { q: "17. Which statement is used for multi-way branching?", a:["if","for","switch","while"] },
      { q: "18. Which loop executes at least once?", a:["for","while","do-while","foreach"] },
      { q: "19. Which keyword exits a loop immediately?", a:["continue","break","return","exit"] },
      { q: "20. To skip current iteration you use:", a:["break","skip","next","continue"] },
      { q: "21. Converting a long to an int is called?", a:["Widening","Narrowing","Promotion","Autoboxing"] },
      { q: "22. Which requires explicit cast?", a:["int to long","double to int","byte to short (smaller to larger)","short to int"] },
      { q: "23. Casting double 9.9 to int gives?", a:["9","10","9.9","0"] },
      { q: "24. Which is widening?", a:["float to double","double to float","long to short","int to byte"] },
      { q: "25. Which pillar packs data and methods together?", a:["Inheritance","Polymorphism","Encapsulation","Abstraction"] },
      { q: "26. Which feature allows method forms with same name but different parameters?", a:["Overriding","Overloading","Inheritance","Encapsulation"] },
      { q: "27. Which is runtime polymorphism in Java?", a:["Method overloading","Method overriding","Static method","constructors"] },
      { q: "28. Java supports multiple inheritance via:", a:["Classes","Interfaces","Both classes and interfaces","None"] },
      { q: "29. Which creates an array of int of size 5?", a:["int[] a = new int(5);","int[] a = new int[5];","int a[] = 5;","array<int> a = new int[5];"] },
      { q: "30. Strings in Java are:", a:["Mutable","Immutable","Primitive","Pointer"] },
      { q: "31. To get length of String s you call:", a:["s.length","s.length()","s.size()","len(s)"] },
      { q: "32. Which prints characters of string 'abc' reversed approach?", a:["StringBuilder(s).reverse()","s.reverse()","Collections.reverse(s)","s[::-1]"] },
      { q: "33. Which method signature is correct for main method?", a:["public static void main(String[] args)","public void main(String args)","static main(String[] args)","public main()"] },
      { q: "34. Return type is part of method signature for overloading?", a:["Yes","No","Only if static","Only primitive types"] },
      { q: "35. 'this' keyword refers to:", a:["Current class type","Current object reference","Parent object","Static member"] },
      { q: "36. A method that can't be overridden is declared as:", a:["final","static","private","both final and static"] },
      { q: "37. Which is parent of all exceptions?", a:["Exception","RuntimeException","Throwable","Error"] },
      { q: "38. Which block executes even if exception thrown?", a:["try","catch","finally","throw"] },
      { q: "39. Checked exceptions must be:", a:["Caught or declared","Ignored","Only runtime","Not allowed"] },
      { q: "40. Which keyword throws an exception?", a:["throw","throws","thrown","try"] },
      { q: "41. Which collection does not allow duplicates?", a:["List","Set","Map","Queue"] },
      { q: "42. Which class implements Map?", a:["ArrayList","HashSet","HashMap","LinkedList"] },
      { q: "43. Which is thread-safe collection by default?", a:["ArrayList","Vector","HashMap","HashSet"] },
      { q: "44. Which interface provides iterator()?", a:["Collection","Map","Comparable","Serializable"] },
      { q: "45. Which package contains File and FileReader?", a:["java.net","java.io","java.util","java.lang"] },
      { q: "46. FileReader is used for reading:", a:["Binary files","Text files","Database records","Sockets"] },
      { q: "47. To write binary data you use:", a:["FileWriter","FileOutputStream","BufferedReader","Scanner"] },
      { q: "48. Which class is used for buffered reading of characters?", a:["BufferedReader","BufferedInputStream","FileWriter","PrintWriter"] },
      { q: "49. Which collection preserves insertion order?", a:["HashSet","LinkedHashMap","TreeSet","PriorityQueue"] },
      { q: "50. Which Stream API operation transforms elements?", a:["filter()","map()","collect()","forEach()"] }
    ];

    const correctAnswers = [
      1,1,1,1, 1,2,2,0, 2,1,1,0, 1,1,2,0, 2,1,1,3,
      1,0,0,0, 2,1,1,1, 1,1,1,0, 0,1,1,0, 2,2,0,0,
      1,2,1,0, 1,1,1,0,1,1
    ];

    const quizContainer = document.getElementById("quizContainer");

    // Render all questions
    questions.forEach((item, i) => {
      const div = document.createElement("div");
      div.className = "question";
      let html = `<p>${item.q}</p>`;
      item.a.forEach((opt, j) => {
        html += `<label><input type="radio" name="q${i}" value="${j}"> ${opt}</label><br>`;
      });
      div.innerHTML = html;
      quizContainer.appendChild(div);
    });

    // Handle submission
    document.getElementById("quizForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (selected && parseInt(selected.value) === correctAnswers[i]) {
          score++;
        }
      }
      const percent = Math.round((score / questions.length) * 100);
      document.getElementById("result").innerHTML = `<h3>You scored ${percent}% (${score}/${questions.length})</h3>`;

      // Submit score to server via simple POST (no AJAX)
      const form = document.createElement("form");
      form.method = "POST";
      form.action = "ExamServlet";
      const scoreInput = document.createElement("input");
      scoreInput.type = "hidden";
      scoreInput.name = "score";
      scoreInput.value = percent;
      form.appendChild(scoreInput);
      document.body.appendChild(form);
      form.submit();
    });
  </script>
</body>
</html>
